<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Документация API Gloffy Wrapper</title>
    <link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@400;600;700&display=swap" rel="stylesheet">
    <style>
        :root {
            --primary-dark: #2c3e50;
            --primary-accent: #8e44ad;
            --secondary-accent: #3498db;
            --text-light: #ecf0f1;
            --text-dark: #34495e;
            --background-light: #f6f8fa;
            --white: #ffffff;
            --border-color: #e0e6ed;
            --code-bg: #282c34;
            --code-text: #abb2bf;
        }

        body {
            font-family: 'Montserrat', sans-serif;
            margin: 0;
            padding: 0;
            background-color: var(--background-light);
            color: var(--text-dark);
            line-height: 1.7;
        }

        header {
            background: linear-gradient(90deg, var(--primary-dark), var(--primary-accent));
            color: var(--white);
            padding: 4em 1em;
            text-align: center;
            border-bottom-left-radius: 20px;
            border-bottom-right-radius: 20px;
        }

        header h1 {
            margin: 0;
            font-size: 3em;
            font-weight: 700;
        }

        header p {
            font-size: 1.2em;
            font-weight: 400;
            opacity: 0.9;
            max-width: 700px;
            margin: 0.5em auto 0;
        }

        .container {
            max-width: 1100px;
            margin: 2.5em auto;
            padding: 0 1.5em;
        }

        .section {
            background-color: var(--white);
            padding: 2.5em;
            margin-bottom: 2.5em;
            border-radius: 12px;
            box-shadow: 0 8px 25px rgba(44, 62, 80, 0.08);
            transition: transform 0.3s ease, box-shadow 0.3s ease;
        }
        
        .section:hover {
            transform: translateY(-5px);
            box-shadow: 0 12px 35px rgba(44, 62, 80, 0.12);
        }

        .section-header {
            display: flex;
            align-items: center;
            gap: 15px;
            border-bottom: 3px solid var(--primary-accent);
            padding-bottom: 0.7em;
            margin-bottom: 1.5em;
        }

        .section-header svg {
            width: 32px;
            height: 32px;
            fill: var(--primary-accent);
        }

        h2 {
            color: var(--primary-dark);
            font-size: 2em;
            margin: 0;
        }

        h3 {
            color: var(--primary-accent);
            font-size: 1.5em;
            margin-top: 2em;
            margin-bottom: 1em;
        }

        code {
            background-color: rgba(142, 68, 173, 0.1);
            padding: 0.2em 0.5em;
            border-radius: 6px;
            font-family: 'SF Mono', 'Courier New', monospace;
            color: var(--primary-accent);
            font-size: 0.9em;
        }

        pre {
            background-color: var(--code-bg);
            color: var(--code-text);
            padding: 1.5em;
            border-radius: 10px;
            overflow-x: auto;
            font-family: 'SF Mono', 'Courier New', monospace;
            font-size: 0.95em;
            box-shadow: inset 0 2px 5px rgba(0,0,0,0.2);
        }

        pre code {
            background-color: transparent;
            padding: 0;
            color: inherit;
        }

        .endpoint {
            border: 1px solid var(--border-color);
            border-left: 6px solid var(--secondary-accent);
            padding: 1.5em 2em;
            margin-top: 2em;
            border-radius: 10px;
            background-color: #fdfdff;
        }

        .endpoint h3 {
            margin-top: 0;
            color: var(--primary-dark);
            font-size: 1.6em;
            font-weight: 600;
        }

        .method {
            color: var(--white);
            padding: 0.4em 0.9em;
            border-radius: 7px;
            font-weight: bold;
            margin-right: 0.8em;
            display: inline-block;
            font-size: 0.9em;
            text-transform: uppercase;
        }

        .get { background-color: #27ae60; }

        .param-table {
            width: 100%;
            border-collapse: collapse;
            margin-top: 1.5em;
            font-size: 0.95em;
        }

        .param-table th, .param-table td {
            border: 1px solid var(--border-color);
            padding: 1em;
            text-align: left;
        }

        .param-table th {
            background-color: var(--background-light);
            font-weight: 600;
            color: var(--primary-dark);
        }
        
        .param-table tbody tr:hover {
            background-color: #f0f4ff;
        }

        footer {
            text-align: center;
            padding: 2.5em 0;
            color: var(--text-light);
            font-size: 0.95em;
            background-color: var(--primary-dark);
            margin-top: 4em;
        }
    </style>
</head>
<body>
    <header>
        <h1>Gloffy Wrapper</h1>
        <p>Мощный и удобный API для взаимодействия с Modrinth и CurseForge.</p>
    </header>

    <div class="container">
        <section class="section">
            <div class="section-header">
                <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm1 15h-2v-6h2v6zm0-8h-2V7h2v2z"/></svg>
                <h2>Введение</h2>
            </div>
            <p>Этот API предоставляет унифицированный интерфейс для поиска и получения информации о модах для Minecraft с популярных платформ, таких как CurseForge и Modrinth. Он скрывает сложности взаимодействия с API каждой платформы, предлагая простой и последовательный способ получения данных о модах.</p>
            <p>API создан с использованием Flask, веб-фреймворка на Python. </p>
            <h3>Базовый URL</h3>
            <p>Базовый URL для всех конечных точек API относителен к корню вашего Flask-приложения.</p>
            <pre><code>http://&lt;ваш-домен-api&gt;/</code></pre>
        </section>

        <section class="section">
            <div class="section-header">
                <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M21 11.5c0-1.28-1.02-2.3-2.3-2.3H5.3C4.02 9.2 3 10.22 3 11.5S4.02 13.8 5.3 13.8h13.4c1.28 0 2.3-1.02 2.3-2.3zm-15.7 1c-.61 0-1.1-.49-1.1-1.1s.49-1.1 1.1-1.1 1.1.49 1.1 1.1-.49 1.1-1.1 1.1zm4.4 0c-.61 0-1.1-.49-1.1-1.1s.49-1.1 1.1-1.1 1.1.49 1.1 1.1-.49 1.1-1.1 1.1zm4.3 0c-.61 0-1.1-.49-1.1-1.1s.49-1.1 1.1-1.1 1.1.49 1.1 1.1-.49 1.1-1.1 1.1z"/></svg>
                <h2>Конечные точки API</h2>
            </div>

            <div class="endpoint">
                <h3><span class="method get">GET</span> <code>/mods/search</code></h3>
                <p>Ищет моды по различным критериям. Эта точка объединяет результаты с CurseForge и Modrinth, сортирует их по количеству загрузок (по убыванию) и отфильтровывает моды с низким порогом скачиваний.</p>

                <h4>Параметры запроса:</h4>
                <table class="param-table">
                    <thead>
                        <tr>
                            <th>Параметр</th>
                            <th>Тип</th>
                            <th>Описание</th>
                            <th>Обязательный</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr>
                            <td><code>name</code></td>
                            <td>string</td>
                            <td>Имя или часть имени мода для поиска.</td>
                            <td>Необязательный</td>
                        </tr>
                        <tr>
                            <td><code>version</code></td>
                            <td>string</td>
                            <td>Версия игры Minecraft, которую поддерживает мод (например, "1.18.2").</td>
                            <td>Необязательный</td>
                        </tr>
                        <tr>
                            <td><code>mod_loader</code></td>
                            <td>string</td>
                            <td>Загрузчик модов (например, "forge", "fabric", "quilt").</td>
                            <td>Необязательный</td>
                        </tr>
                        <tr>
                            <td><code>limit</code></td>
                            <td>integer</td>
                            <td>Максимальное количество возвращаемых результатов.</td>
                            <td>Необязательный</td>
                        </tr>
                        <tr>
                            <td><code>offset</code></td>
                            <td>integer</td>
                            <td>Количество пропускаемых результатов (для пагинации).</td>
                            <td>Необязательный</td>
                        </tr>
                    </tbody>
                </table>

                <h4>Пример запроса:</h4>
                <pre><code>GET /mods/search?name=journeymap&version=1.19.2&mod_loader=forge&limit=5</code></pre>

                <h4>Пример ответа (JSON):</h4>
                <pre><code>
{
  "data": [
    {
      "downloads": 15000000,
      "slug": "journeymap",
      "name": "JourneyMap",
      "logo": "https://curseforge.com/path/to/logo.png",
      "id": "12345",
      "source": "curseforge",
      "about": "A real-time mapping mod for Minecraft."
    },
    {
      "downloads": 8000000,
      "slug": "fabric-api",
      "name": "Fabric API",
      "logo": "https://modrinth.com/path/to/logo.png",
      "id": "abcde",
      "source": "modrinth"
    }
  ],
  "length": 2
}
                </code></pre>
            </div>

            <div class="endpoint">
                <h3><span class="method get">GET</span> <code>/mods/&lt;id&gt;</code></h3>
                <p>Получает подробную информацию о конкретном моде по его ID. API автоматически определяет источник (CurseForge или Modrinth) на основе формата ID.</p>

                <h4>Параметры пути:</h4>
                <table class="param-table">
                    <thead>
                        <tr>
                            <th>Параметр</th>
                            <th>Тип</th>
                            <th>Описание</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr>
                            <td><code>id</code></td>
                            <td>string / integer</td>
                            <td>Уникальный идентификатор мода. Может быть числовым ID CurseForge (<code>12345</code>) или строковым ID Modrinth (<code>abcde</code>).</td>
                        </tr>
                    </tbody>
                </table>

                <h4>Параметры запроса:</h4>
                <table class="param-table">
                     <thead>
                        <tr>
                            <th>Параметр</th>
                            <th>Тип</th>
                            <th>Описание</th>
                            <th>Обязательный</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr>
                            <td><code>version</code></td>
                            <td>string</td>
                            <td>Фильтрует файлы, чтобы вернуть только совместимые с указанной версией Minecraft.</td>
                             <td>Необязательный</td>
                        </tr>
                        <tr>
                            <td><code>mod_loader</code></td>
                            <td>string</td>
                            <td>Фильтрует файлы, чтобы вернуть только совместимые с указанным загрузчиком модов.</td>
                            <td>Необязательный</td>
                        </tr>
                    </tbody>
                </table>

                <h4>Примеры запросов:</h4>
                <pre><code>GET /mods/12345?version=1.16.5&mod_loader=forge</code></pre>
                <pre><code>GET /mods/abcde?version=1.19.2</code></pre>

                <h4>Пример ответа (JSON):</h4>
                <pre><code>
{
  "data": [
    {
      "name": "JourneyMap 5.18.0",
      "downloads": 123456,
      "url": "https://curseforge.com/download/file/1234567",
      "versions": ["1.16.5"],
      "dependencies": [78901],
      "loaders": ["forge"]
    },
    {
      "name": "Fabric API 0.76.0+1.19",
      "downloads": 98765,
      "url": "https://modrinth.com/download/file/abcdef",
      "versions": ["1.19", "1.19.1", "1.19.2"],
      "dependencies": [],
      "loaders": ["fabric"]
    }
  ],
  "length": 2
}
                </code></pre>
            </div>
        </section>

        <section class="section">
            <div class="section-header">
                 <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 2L1 21h22M12 6l7.55 13H4.45M11 10v4h2v-4m-2 6v2h2v-2"/></svg>
                <h2>Обработка ошибок</h2>
            </div>
            <p>В случае возникновения ошибки API вернет стандартизированный JSON-ответ:</p>
            <pre><code>
{
  "data": [],
  "length": "0"
}
            </code></pre>
            <p>Это означает, что данные не были получены, и длина массива <code>data</code> равна нулю.</p>
        </section>

        <section class="section">
             <div class="section-header">
                <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19.14,12.94c0.04-0.3,0.06-0.61,0.06-0.94c0-0.32-0.02-0.64-0.07-0.94l2.03-1.58c0.18-0.14,0.23-0.41,0.12-0.61 l-1.92-3.32c-0.12-0.22-0.37-0.29-0.59-0.22l-2.39,0.96c-0.5-0.38-1.03-0.69-1.62-0.92L14.4,2.23C14.34,2,14.09,1.86,13.85,1.86 h-3.7c-0.24,0-0.48,0.14-0.54,0.37L9.22,4.65C8.63,4.88,8.1,5.19,7.6,5.57L5.21,4.61C4.99,4.52,4.74,4.59,4.62,4.79L2.7,8.11 c-0.11,0.2-0.06,0.47,0.12,0.61L4.85,10.3c-0.05,0.3-0.07,0.62-0.07,0.94c0,0.32,0.02,0.64,0.07,0.94l-2.03,1.58 c-0.18,0.14-0.23,0.41-0.12,0.61l1.92,3.32c0.12,0.22,0.37,0.29,0.59,0.22l2.39-0.96c0.5,0.38,1.03,0.69,1.62,0.92l0.39,2.42 c0.05,0.23,0.3,0.37,0.54,0.37h3.7c0.24,0,0.48-0.14,0.54-0.37l0.39-2.42c0.59-0.23,1.12-0.54,1.62-0.92l2.39,0.96 c0.22,0.08,0.47,0.01,0.59-0.22l1.92-3.32c0.12-0.2,0.07-0.47-0.12-0.61L19.14,12.94z M12,15.6c-1.98,0-3.6-1.62-3.6-3.6 s1.62-3.6,3.6-3.6s3.6,1.62,3.6,3.6S13.98,15.6,12,15.6z"/></svg>
                <h2>Конфигурация</h2>
            </div>
            <p>API использует настраиваемый порог скачиваний (<code>DOWNLOADS_TRESHOLD</code>) для фильтрации результатов поиска. Это значение загружается из переменных окружения и по умолчанию равно 1000.</p>
            <pre><code>
DOWNLOADS_TRESHOLD = os.getenv("DOWNLOADS_TRESHOLD")

if not DOWNLOADS_TRESHOLD:
    DOWNLOADS_TRESHOLD = 1000
            </code></pre>
            <p>API-ключи для CurseForge также загружаются из переменных окружения и являются обязательными для вызовов к API CurseForge.</p>
        </section>
    </div>

    <footer>
        <p>&copy; 2025 Gloffy Wrapper. Все права защищены.</p>
    </footer>
</body>
</html>```